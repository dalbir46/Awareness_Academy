<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Class 10 - Chapter 1 (Ex 1.1)</title>
  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script id="MathJax-script" async
    src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; background:#f9f9f9; }
    .question { margin-bottom: 30px; padding:15px; background:#fff; border-radius:10px; box-shadow:0 2px 6px rgba(0,0,0,0.1); }
    .question-title { font-weight:bold; margin-bottom:10px; }
    textarea { width:100%; height:100px; margin-bottom:10px; padding:10px; }
    .preview { border:1px solid #ccc; padding:10px; min-height:50px; margin-bottom:10px; background:#fafafa; }
    button { margin-right:10px; padding:8px 16px; border:none; border-radius:6px; cursor:pointer; }
    .preview-btn { background:#007bff; color:#fff; }
    .save-btn { background:#28a745; color:#fff; }
    .clear-btn { background:#ffc107; color:#000; }
    .delete-btn { background:#dc3545; color:#fff; }
    #downloadPdfBtn { background:#6f42c1; color:#fff; margin-top:20px; padding:10px 20px; }
  </style>
</head>
<body>

  <h2>Class 10 - Chapter 1: Real Numbers (Exercise 1.1)</h2>

  <!-- Admin login -->
  <div id="loginSection">
    <input type="password" id="adminPass" placeholder="Enter Admin Password">
    <button onclick="adminLogin()">Login</button>
  </div>

  <!-- Questions -->
  <div id="questionsSection" style="display:none;">

    <!-- Q1 -->
    <div class="question" id="q1">
      <div class="question-title">Q1: Use Euclid's division algorithm to find the HCF of 135 and 225.</div>
      <textarea id="input1" placeholder="Enter MathJax code here..."></textarea>
      <div class="preview" id="preview1"></div>
      <button class="preview-btn" onclick="renderPreview(1)">Preview</button>
      <button class="save-btn" onclick="saveAnswer(1)">Save</button>
      <button class="clear-btn" onclick="clearInput(1)">Clear</button>
      <button class="delete-btn" onclick="deleteAnswer(1)">Delete</button>
    </div>

    <!-- Q2 -->
    <div class="question" id="q2">
      <div class="question-title">Q2: Find the HCF of 196 and 38220 using Euclid's division lemma.</div>
      <textarea id="input2" placeholder="Enter MathJax code here..."></textarea>
      <div class="preview" id="preview2"></div>
      <button class="preview-btn" onclick="renderPreview(2)">Preview</button>
      <button class="save-btn" onclick="saveAnswer(2)">Save</button>
      <button class="clear-btn" onclick="clearInput(2)">Clear</button>
      <button class="delete-btn" onclick="deleteAnswer(2)">Delete</button>
    </div>

    <!-- Q3 -->
    <div class="question" id="q3">
      <div class="question-title">Q3: A circular field has a circumference of 360 km. Find the distance covered in one round if its diameter is 360 km.</div>
      <textarea id="input3" placeholder="Enter MathJax code here..."></textarea>
      <div class="preview" id="preview3"></div>
      <button class="preview-btn" onclick="renderPreview(3)">Preview</button>
      <button class="save-btn" onclick="saveAnswer(3)">Save</button>
      <button class="clear-btn" onclick="clearInput(3)">Clear</button>
      <button class="delete-btn" onclick="deleteAnswer(3)">Delete</button>
    </div>

    <!-- Q4 -->
    <div class="question" id="q4">
      <div class="question-title">Q4: Find the largest number that divides 650 and 1170 exactly.</div>
      <textarea id="input4" placeholder="Enter MathJax code here..."></textarea>
      <div class="preview" id="preview4"></div>
      <button class="preview-btn" onclick="renderPreview(4)">Preview</button>
      <button class="save-btn" onclick="saveAnswer(4)">Save</button>
      <button class="clear-btn" onclick="clearInput(4)">Clear</button>
      <button class="delete-btn" onclick="deleteAnswer(4)">Delete</button>
    </div>

    <!-- Q5 -->
    <div class="question" id="q5">
      <div class="question-title">Q5: Find the HCF of 336 and 54 using Euclid's algorithm.</div>
      <textarea id="input5" placeholder="Enter MathJax code here..."></textarea>
      <div class="preview" id="preview5"></div>
      <button class="preview-btn" onclick="renderPreview(5)">Preview</button>
      <button class="save-btn" onclick="saveAnswer(5)">Save</button>
      <button class="clear-btn" onclick="clearInput(5)">Clear</button>
      <button class="delete-btn" onclick="deleteAnswer(5)">Delete</button>
    </div>

    <button id="downloadPdfBtn">Download Full Chapter PDF</button>
  </div>

<script>
let isAdmin = false;

// Admin login
function adminLogin(){
  const pass = document.getElementById("adminPass").value;
  if(pass === "admin123"){ // <-- yahan apna password set karo
    isAdmin = true;
    document.getElementById("loginSection").style.display="none";
    document.getElementById("questionsSection").style.display="block";
    loadSavedAnswers();
  } else {
    alert("Wrong password");
  }
}

// Render preview
function renderPreview(i){
  const input = document.getElementById("input"+i).value;
  const preview = document.getElementById("preview"+i);
  preview.innerHTML = "\\[" + input + "\\]";
  MathJax.typesetPromise([preview]);
}

// Save answer
function saveAnswer(i){
  const input = document.getElementById("input"+i).value;
  if(!input){ alert("Please enter some code"); return; }
  const preview = document.getElementById("preview"+i);
  localStorage.setItem("ex1_1_ans"+i, preview.innerHTML);
  alert("Answer saved!");
}

// Load saved answers
function loadSavedAnswers(){
  for(let i=1;i<=5;i++){
    const saved = localStorage.getItem("ex1_1_ans"+i);
    if(saved){
      const preview = document.getElementById("preview"+i);
      preview.innerHTML = saved;
      MathJax.typesetPromise([preview]);
    }
  }
}

// Clear input
function clearInput(i){
  document.getElementById("input"+i).value="";
  document.getElementById("preview"+i).innerHTML="";
}

// Delete answer
function deleteAnswer(i){
  localStorage.removeItem("ex1_1_ans"+i);
  document.getElementById("preview"+i).innerHTML="";
  alert("Answer deleted!");
}

// Download saved answers as PDF (vector text)
document.getElementById("downloadPdfBtn").addEventListener("click", async ()=>{
  const savedIndices = [];
  for(let i=1;i<=5;i++){
    if(localStorage.getItem("ex1_1_ans"+i)) savedIndices.push(i);
  }
  if(savedIndices.length===0){ alert("No saved answers to download."); return; }

  const { jsPDF } = window.jspdf;
  const pdf = new jsPDF({unit:'pt',format:'a4'});

  let y = 40;
  pdf.setFont("times","bold");
  pdf.setFontSize(16);
  pdf.text("Class 10 - Chapter 1: Real Numbers (Ex 1.1)", 40, y);
  y += 30;

  for(const idx of savedIndices){
    const qTitle = document.querySelector("#q"+idx+" .question-title").innerText;
    const ansHtml = localStorage.getItem("ex1_1_ans"+idx);

    pdf.setFont("times","bold");
    pdf.setFontSize(13);
    pdf.text("Q"+idx+": "+qTitle, 40, y);
    y += 20;

    pdf.setFont("times","normal");
    pdf.setFontSize(12);
    // Strip MathJax HTML to plain text
    const tempDiv = document.createElement("div");
    tempDiv.innerHTML = ansHtml;
    const ansText = tempDiv.innerText || "";
    const split = pdf.splitTextToSize(ansText, 520);
    pdf.text(split, 60, y);
    y += split.length * 14 + 20;

    if(y > 700){
      pdf.addPage();
      y = 40;
    }
  }

  pdf.save("Ex1_1_Real_Numbers.pdf");
});
</script>

</body>
  </html>
