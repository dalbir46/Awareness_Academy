<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Class 10 — Chapter 1: Real Numbers</title>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
  <style>
    :root{--accent1:#6a11cb;--accent2:#2575fc;--card:#fff;--muted:#666}
    body{font-family:Arial,Helvetica,sans-serif;background:#f0f8ff;margin:0;color:#000}
    .header-wrapper,.footer-wrapper{background:linear-gradient(135deg,var(--accent1),var(--accent2));padding:12px}
    .header,.footer-inner{background:#ffffcc;padding:14px;text-align:center;font-weight:700;border:2px solid #333;border-radius:10px;max-width:980px;margin:auto}
    .container{max-width:980px;margin:18px auto;padding:0 12px}
    .login-row{display:flex;gap:8px;justify-content:center;margin-bottom:14px}
    .login-row input{padding:8px;border-radius:6px;border:1px solid #999}
    .login-row button{padding:8px 12px;border-radius:6px;border:none;background:#0b62ff;color:#fff;font-weight:700;cursor:pointer}
    #adminStatus{display:none;color:green;font-weight:700;text-align:center;margin-bottom:8px}
    #logoutBtn{display:none;margin:auto;display:block;background:#f44336;color:#fff;font-weight:700;padding:8px 14px;border:none;border-radius:6px;cursor:pointer;margin-bottom:14px}
    .question-box{background:var(--card);border:1px solid #ddd;border-radius:8px;padding:12px;margin:10px 0}
    .question-title{font-weight:700;margin-bottom:8px}
    .answer-box{min-height:56px;border:1px dashed #bbb;padding:10px;border-radius:6px;background:#fff;margin-bottom:8px}
    .btns{margin-top:8px}
    .btn{padding:6px 10px;border-radius:6px;border:none;margin-right:6px;cursor:pointer;color:#fff;font-weight:700}
    .btn-preview{background:#2196F3}
    .btn-save{background:#4CAF50}
    .btn-clear{background:#9E9E9E}
    .preview-input{width:100%;min-height:50px;border:1px solid #999;border-radius:6px;padding:6px;margin-top:6px}
    .preview-output{min-height:40px;border:1px solid #ccc;background:#fafafa;padding:8px;margin-top:6px;border-radius:6px}
    .small{font-size:13px;color:var(--muted)}
    @media(max-width:700px){.login-row{flex-direction:column;align-items:center}}
  </style>
</head>
<body>
  <div class="header-wrapper"><div class="header">Mathematics Hub — Class 10 &nbsp;|&nbsp; Chapter 1: Real Numbers</div></div>

  <div class="container">
    <div class="login-row">
      <input id="loginUser" placeholder="Username" />
      <input id="loginPass" placeholder="Password" type="password" />
      <button id="loginBtn">Login as Admin</button>
    </div>
    <div id="adminStatus">✅ Admin login successful</div>
    <button id="logoutBtn">Logout</button>

    <!-- Question 1 -->
    <div class="question-box" id="q1">
      <div class="question-title">Ex 1.1 — Q1. Express each number as a product of its prime factors:<br>(i) 140 (ii) 156 (iii) 3825 (iv) 5005 (v) 7429</div>
      <div class="answer-box" id="ans1"></div>
      <textarea id="input1" class="preview-input" placeholder="Enter MathJax code here..."></textarea>
      <div class="preview-output" id="preview1"></div>
      <div class="btns">
        <button class="btn btn-preview" data-q="1">Preview</button>
        <button class="btn btn-save" data-q="1">Save</button>
        <button class="btn btn-clear" data-q="1">Clear</button>
      </div>
    </div>

    <!-- Question 2 -->
    <div class="question-box" id="q2">
      <div class="question-title">Ex 1.1 — Q2. Find the HCF and LCM of the following pairs and verify HCF × LCM = product of the numbers:<br>(i) 26, 91 (ii) 510, 92 (iii) 336, 54</div>
      <div class="answer-box" id="ans2"></div>
      <textarea id="input2" class="preview-input" placeholder="Enter MathJax code here..."></textarea>
      <div class="preview-output" id="preview2"></div>
      <div class="btns">
        <button class="btn btn-preview" data-q="2">Preview</button>
        <button class="btn btn-save" data-q="2">Save</button>
        <button class="btn btn-clear" data-q="2">Clear</button>
      </div>
    </div>

    <div class="small">Note: Currently implemented for Q1 and Q2 only.</div>
  </div>

  <div class="footer-wrapper"><div class="footer-inner">© 2025 Mathematics Hub</div></div>

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
  <script>
    var firebaseConfig = {
      apiKey: "AIzaSyCrAjPSSQ5-nvEQNK1vxxZcWEi0ml4AePQ",
      authDomain: "mathematics-hub-7087f.firebaseapp.com",
      databaseURL: "https://mathematics-hub-7087f-default-rtdb.firebaseio.com",
      projectId: "mathematics-hub-7087f",
      storageBucket: "mathematics-hub-7087f.appspot.com",
      messagingSenderId: "182359137920",
      appId: "1:182359137920:web:1cf89e1d441ea1503a9065"
    };
    firebase.initializeApp(firebaseConfig);
    var db = firebase.database();

    const ADMIN_USERNAME = "admin";
    const ADMIN_PASSWORD = "Dalbir@551";

    function isAdmin(){ return localStorage.getItem("isAdmin")==="true"; }
    function setAdmin(flag){
      if(flag) localStorage.setItem("isAdmin","true");
      else localStorage.removeItem("isAdmin");
      updateUI();
    }

    function updateUI(){
      document.getElementById("adminStatus").style.display = isAdmin() ? "block" : "none";
      document.getElementById("logoutBtn").style.display = isAdmin() ? "block" : "none";
      document.querySelectorAll(".preview-input,.btns,.preview-output").forEach(el=>{
        el.style.display = isAdmin() ? "block" : "none";
      });
    }

    function loadAnswers(){
      ["1","2"].forEach(i=>{
        db.ref("chapter1/ans"+i).once("value").then(snap=>{
          if(snap.exists()){
            document.getElementById("ans"+i).innerHTML = snap.val();
            MathJax.typesetPromise();
          }
        });
      });
    }

    window.onload = ()=>{ updateUI(); loadAnswers(); }

    document.getElementById("loginBtn").addEventListener("click",()=>{
      const u=document.getElementById("loginUser").value.trim();
      const p=document.getElementById("loginPass").value;
      if(u===ADMIN_USERNAME && p===ADMIN_PASSWORD){ setAdmin(true); alert("Admin login successful"); }
      else{ alert("Invalid credentials"); setAdmin(false); }
    });

    document.getElementById("logoutBtn").addEventListener("click",()=>{
      setAdmin(false);
      alert("Logged out");
    });

    document.querySelectorAll(".btn-preview").forEach(btn=>{
      btn.addEventListener("click",()=>{
        if(!isAdmin()) return alert("Admin only");
        const q=btn.getAttribute("data-q");
        const input=document.getElementById("input"+q).value;
        const preview=document.getElementById("preview"+q);
        preview.innerHTML="$$"+input+"$$";  // Input should NOT contain \[ \]
        MathJax.typesetPromise([preview]);
      });
    });

    document.querySelectorAll(".btn-save").forEach(btn=>{
      btn.addEventListener("click",()=>{
        if(!isAdmin()) return alert("Admin only");
        const q=btn.getAttribute("data-q");
        const preview=document.getElementById("preview"+q).innerHTML;
        db.ref("chapter1/ans"+q).set(preview).then(()=>{
          document.getElementById("ans"+q).innerHTML=preview;
          MathJax.typesetPromise();
          alert("Saved output for Q"+q);
        });
      });
    });

    // Clear buttons
    document.querySelectorAll(".btn-clear").forEach(btn=>{
      btn.addEventListener("click",()=>{
        if(!isAdmin()) return alert("Admin only");
        const q=btn.getAttribute("data-q");
        document.getElementById("input"+q).value="";
        document.getElementById("preview"+q).innerHTML="";
      });
    });
  </script>
</body>
</html>
